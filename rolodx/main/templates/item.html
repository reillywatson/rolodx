{% extends 'onecolumnbase.html' %}

{% block head %} 
	<link rel="stylesheet" href="{{ STATIC_URL }}styles/item.css" /> 
	<script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?key=AIzaSyAlLwEDIyHgeeg30BZpdAdsXumvBxbWXOA&sensor=true"></script>
	<script type="text/javascript" src="{{ STATIC_URL }}scripts/item.js"></script>
	<script type="text/javascript" src="{{ STATIC_URL }}scripts/googleMapper.js"></script>
	<script type="text/javascript">
		var itemData = {{results.itemData|safe}};
		var item = new Item(itemData[0].fields);
		var googleMapper = new GoogleMapper();
		googleMapper.addMarker(itemData[0].fields, 0);
			
		var reviewData0 = {"author":"Someone useless", 
							"text" : "I've seen better. Or have I. It's hard to say, really. What was the questions again? Either way. I strongly suggest you make up your own mind about how useful he is.",
							"rating" : 3};

		var reviewData1 = {"author":"One Angry Dude", 
							"text" : "This guy SUCKS! I hate him soooo much.",
							"rating" : 0.5};

		var reviewData2 = {"author":"Lurker", 
							"text" : "",
							"rating" : 4.5};
							
		var reviewData3 = {"author":"Javascript is SWEET!", 
							"text" : "Dude I totally added this comment with javascript. I'm so frigging awesome!",
							"rating" : 5};
		var reviewData = [reviewData0, reviewData1, reviewData2, reviewData3];
		var reviews = [];
		for (var i=0; i<reviewData.length; i++) {
			reviews.push(new Review(reviewData[i]));
		}
		
		window.onload = function () {
			// Render Professional metadata
			item.render();
			
			googleMapper.render("item_map");
			
			// Render reviews
			var parentDocument = document.getElementById('item_reviews');
			for (var i=0; i<reviews.length; i++) {
				reviews[i].render(parentDocument);
			}
		}
	</script>
{% endblock %}


{% block content %}
	<div class="item">
		<div class="item_container_top">
			<div class="item_metadata">
				<div class="item_metadata_top">
					<div id="item_metadata_icon"></div>
					<div class="item_metadata_main_top_actions">
						<div id="item_metadata_name"></div>
						<div id="item_metadata_job"></div>
						<div class="item_metadata_rating">
							<div class="item_metadata_rating_text">Rating:</div>
							<div id="item_metadata_rating_stars"></div>
							<div id="item_metadata_num_ratings"></div>
						</div>
						<div id="item_metadata_address"></div>
						<div class="item_metadata_action item_metadata_action1"></div>
						<div class="item_metadata_action item_metadata_action2"></div>
					</div>
				</div>
				<div class="item_metadata_bottom">
					<div id="item_metadata_web"></div>
					<div id="item_metadata_contact"></div>
					<div id="item_metadata_hours"></div>
				</div>
				<div class="item_metadata_main_images"></div>
			</div>
			<div id="item_metadata_description"></div>
		</div>
		<div id="item_map"></div>
	</div>
	
	<div class="item_container_bottom">
		<div class="item_rate">
			<div class="item_rate_stars"></div>
			<textarea class="item_rate_review">This guy is just awesome. I'm continuously blown away by how wicked he is. Wow. Just wow.</textarea>
			<div class="item_rate_rate_button"></div>
			<div class="item_rate_facebook"><input type="checkbox"></input>Also submit to Facebook</div>
		</div>
		
		<div id="item_reviews" class="item_reviews"></div>
	</div>
{% endblock %}
